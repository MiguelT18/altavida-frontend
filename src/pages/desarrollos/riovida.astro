---
import Header from "@components/Header.astro";
import MainSection from "@components/MainSection.astro";
import PhoneContact from "public/media/icons/PhoneContact.astro";
import Previous from "public/media/icons/Previous.astro";
import ContactLayout from "src/layouts/ContactLayout.astro";
import Layout from "src/layouts/Layout.astro";

const SliderImages = [
	"/media/images/pages/desarrollos/rioVida/1.webp",
	"/media/images/pages/desarrollos/rioVida/2.webp",
	"/media/images/pages/desarrollos/rioVida/3.webp",
	"/media/images/pages/desarrollos/rioVida/4.webp",
	"/media/images/pages/desarrollos/rioVida/5.webp",
	"/media/images/pages/desarrollos/rioVida/6.webp",
	"/media/images/pages/desarrollos/rioVida/7.webp",
	"/media/images/pages/desarrollos/rioVida/8.webp",
	"/media/images/pages/desarrollos/rioVida/9.webp",
	"/media/images/pages/desarrollos/rioVida/10.webp",
	"/media/images/pages/desarrollos/rioVida/11.webp",
	"/media/images/pages/desarrollos/rioVida/12.webp",
	"/media/images/pages/desarrollos/rioVida/13.webp",
	"/media/images/pages/desarrollos/rioVida/14.webp",
];

function shuffleArray(array: Array<string>) {
	for (let i = array.length - 1; i > 0; i--) {
		const j = Math.floor(Math.random() * (i + 1));
		[array[i], array[j]] = [array[j], array[i]];
	}
	return array;
}

const shuffledImages = shuffleArray(SliderImages);
---

<Layout title="Desarrollo - Río Vida">
	<Header
		backgroundImage="/media/images/pages/desarrollos/rioVida/renderHeader.jpg"
	>
		<a
			href="/desarrollos"
			class="text-sm flex items-center gap-2 hover:text-orange transition-all"
		>
			<Previous />
			<span>Atrás</span>
		</a>
	</Header>
	<MainSection>
		<article class="flex max-lg:flex-col max-w-[900px] mx-auto px-12 gap-10">
			<figure class="max-lg:text-center">
				<h1
					transition:name="riovida-name"
					class="text-lg font-bold text-black uppercase"
				>
					Río Vida
				</h1>

				<p class="text-sm text-dark mt-3">
					Descubre Río Vida, el nuevo horizonte de AltaVida para tu hogar.
					Encuentra la casa o departamento perfecto para ti en una ubicación
					estratégica. En Río Vida, creamos hogares que se adaptan a tus
					necesidades y gustos.
				</p>
				<a
					class="flex gap-3 items-center bg-orange hover:bg-[#De7700] transition-all mt-5 rounded-full w-fit text-white px-5 py-2 max-lg:mx-auto"
					href="https://wa.link/ovut67"
				>
					<span class="text-sm">Contacto</span>
					<PhoneContact />
				</a>
			</figure>
			<img
				transition:name="riovida-image"
				class="w-full max-w-[380px] max-lg:max-w-[600px] h-full mx-auto"
				src="/media/images/pages/desarrollos/rioVida/rioVida_portada.png"
				alt="RioVida render button"
			/>
		</article>

		<div class="mx-auto mt-5">
			<h1 class="text-lg uppercase font-bold text-center py-5">
				Explora nuestra galería
			</h1>
			<div class="riovidaImageGallery">
				{
					shuffledImages.map((image, index) => (
						<figure id="riovida-image-card">
							<img
								class="w-full max-w-[1080px]"
								src={image}
								alt={`Image: #${index}`}
							/>
						</figure>
					))
				}
			</div>
		</div>
	</MainSection>

	<ContactLayout />
</Layout>

<script>
	document.addEventListener("astro:page-load", () => {
		const image = document.querySelectorAll("#riovida-image-card");
		image.forEach((image) => {
			image.addEventListener("click", () => {
				image.classList.toggle("active");
				document.body.style.overflow = image.classList.contains("active")
					? "hidden"
					: "auto";
			});
		});
	});
</script>

<style>
	.riovidaImageGallery figure.active {
		position: fixed;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		top: 50%;
		left: 50%;
		transition: background 0.3s ease;
		transform: translate(-50%, -50%);
		background: rgba(0, 0, 0, 0.75);
		width: 100vw;
		height: 100vh;
		z-index: 100;
	}
	.riovidaImageGallery {
		width: 100%;
		max-width: 800px;
		margin: 0 auto;
		display: grid;
		justify-items: center;
		grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
		gap: 3px;
	}
	.riovidaImageGallery figure {
		position: relative;
		box-shadow: 0 8px 11px rgba(0, 0, 0, 0.2);
		transition: transform 0.3s ease-out;
		cursor: pointer;
	}
	.riovidaImageGallery figure:not(.active):hover {
		transform: scale(1.03);
	}
</style>
